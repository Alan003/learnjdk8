title: 小区节电流程配置
type: object
properties:
  start_node: Task_1c7rs4k
  engine_variables:
    title: 流转变量
    type: object
    properties:
      wo_title:
        title: 工单标题
        type: string
      description:
        title: 需求描述
        type: string
      files:
        title: 节电任务清单上传
        type: file
      org_type_readOnly:
        title: 发起单位
        type: string
      org_type:
        title: 发起单位
        type: number
      cell_num:
        title: 小区数量
        type: long
      operation_types:
        title: 操作类别
        type: string
      citys:
        title: 涉及地市
        type: string
      factories:
        title: 涉及厂家
        type: string
      cell_num_readOnly:
        title: 小区数量
        type: long
      operation_types_readOnly:
        title: 操作类别
        type: string
      citys_readOnly:
        title: 涉及地市
        type: string
      factories_readOnly:
        title: 涉及厂家
        type: string
      city_jd_auditors:
        title: 市公司节电负责人
        type: string
      city_jd_auditor_result:
        title: 市公司节电负责人审核结果
        type: number
      city_jd_auditor_opinion:
        title: 市公司节电负责人审核意见
        type: string
      province_jd_auditors:
        title: 省公司节电负责人
        type: string
      province_jd_auditor_result:
        title: 省公司节电负责人审核结果
        type: number
      province_jd_auditor_opinion:
        title: 省公司节电负责人审核意见
        type: string
      directors:
        title: 省公司优化主任
        type: string
      director_approve_result:
        title: 省公司优化主任审核结果
        type: number
      director_approve_opinion:
        title: 省公司优化主任审核意见
        type: string
      leaders:
        title: 省公司优化中心领导
        type: string
      leader_approve_result:
        title: 省公司优化中心领导审核结果
        type: number
      leader_approve_opinion:
        title: 省公司优化中心领导审核意见
        type: string
      creator_approve_result:
        title: 用户确认结束结果
        type: number
      pause:
        title: 暂停
        type: long
      templateDownload:
        title: 模板下载
        type: array
      org_type_cn:
        title: 发起单位中文名称
        type: string
  ui_groups:
    create_ui_view:
      title: 工单创建
      controls:
        wo_title:
          ui:
            widget: text
            col: 24
          validate:
            required: true
            maxLength: 200
        description:
          ui:
            widget: textarea
            col: 24
          validate:
            required: true
        files:
          ui:
            widget: jdgl-excel-upload
            options:
              show: true
          validate:
            required: true
        templateDownload:
          ui:
            widget: hyperlink-view
            col: 24
            data: [{"url": "https://nqi.gmcc.net:20443/dev-wfm-biz-jdgl/file/download/891fcdf8a3544d749dd8de57181ad517","label": "节电管理小区关断清单模板下载"}]
    details_ui_view:
      title: 节电任务详情
      controls:
        org_type:
          ui:
            widget: cell-save-electricity-role
        org_type_readOnly:
          ui:
            widget: text-view
            col: 8
            data: engine_data.org_type==2? '省公司':engine_data.org_type==3? '市公司':''
        cell_num_readOnly:
          ui:
            widget: text-view
            col: 8
            data: engine_data.files==null? '':engine_data.files.dataTotalRowCount
        operation_types_readOnly:
          ui:
            widget: text-view
            col: 8
            data: engine_data.files==null? '':engine_data.files.listType.join('，')
        citys_readOnly:
          ui:
            widget: text-view
            col: 24
            data: engine_data.files==null? '':engine_data.files.city.join('，')
        factories_readOnly:
          ui:
            widget: text-view
            col: 24
            data: engine_data.files==null? '':engine_data.files.deviceFactory.join('，')
        pause:
          ui:
            widget: hidden
            data: engine_data.files==null? 3:engine_data.files.pauseOnly
        cell_num:
          ui:
            widget: hidden
            data: engine_data.files==null? 0:engine_data.files.dataTotalRowCount
        operation_types:
          ui:
            widget: hidden
            data: engine_data.files==null? '':engine_data.files.listType.join('，')
        citys:
          ui:
            widget: hidden
            data: engine_data.files==null? '':engine_data.files.city.join('，')
        factories:
          ui:
            widget: hidden
            data: engine_data.files==null? '':engine_data.files.deviceFactory.join('，')
        org_type_cn:
          ui:
            widget: hidden
            data: engine_data.org_type==2?'省公司':engine_data.org_type==3?'市公司':''
        city_jd_auditor_opinion:
          ui:
            widget: text-view
            col: 24
            options:
              show: engine_data.city_jd_auditor_opinion !=null
        province_jd_auditor_opinion:
          ui:
            widget: text-view
            col: 24
            options:
              show: engine_data.province_jd_auditor_opinion !=null
        director_approve_opinion:
          ui:
            widget: text-view
            col: 24
            options:
              show: engine_data.director_approve_opinion !=null
        leader_approve_opinion:
          ui:
            widget: text-view
            col: 24
            options:
              show: engine_data.leader_approve_opinion !=null
    city_jd_auditors_ui_view:
      title: 市公司审核
      controls:
        city_jd_auditor_result:
          ui:
            col: 12
            widget: select
            data:
            - {value: 1 ,label: 不通过}
            - {value: 2 ,label: 通过}
          validate:
            required: true
        city_jd_auditor_opinion:
          ui:
            widget: textarea
            col: 24
          validate:
            maxLength: 400
    province_jd_auditors_ui_view:
      title: 省公司审核
      controls:
        province_jd_auditor_result:
          ui:
            col: 12
            widget: select
            data:
            - {value: 1 ,label: 不通过}
            - {value: 2 ,label: 通过}
          validate:
            required: true
        province_jd_auditor_opinion:
          ui:
            widget: textarea
            col: 24
          validate:
            maxLength: 400
    director_ui_view:
      title: 省公司优化主任审核
      controls:
        director_approve_result:
          ui:
            col: 12
            widget: select
            data:
            - {value: 1 ,label: 不通过}
            - {value: 2 ,label: 通过}
          validate:
            required: true
        director_approve_opinion:
          ui:
            widget: textarea
            col: 24
          validate:
            maxLength: 400
    province_leader_ui_view:
      title: 省领导审核
      controls:
        leader_approve_result:
          ui:
            col: 12
            widget: select
            data:
            - {value: 1 ,label: 不通过}
            - {value: 2 ,label: 通过}
          validate:
            required: true
        leader_approve_opinion:
          ui:
            widget: textarea
            col: 24
          validate:
            maxLength: 400
    create_details_ui_view:
      title: 工单详情
      controls:
        wo_title:
          ui:
            widget: text-view
        description:
          ui:
            widget: text-view
        files:
          ui:
            widget: hyperlink-view
            col: 24
            data: '[{"url":engine_data.files.url,"label":engine_data.files.name}]'
        org_type_readOnly:
          ui:
            widget: text-view
            col: 8
            data: engine_data.org_type==2? '省公司':engine_data.org_type==3? '市公司':''
        cell_num:
          ui:
            widget: text-view
            col: 8
        operation_types:
          ui:
            widget: text-view
            col: 8
        citys:
          ui:
            widget: text-view
            col: 24
        factories:
          ui:
            widget: text-view
            col: 24
    city_jd_auditors_check_ui_view:
      title: 市公司审核详情
      controls:
        city_jd_auditor_result:
          ui:
            widget: text-view
            col: 12
        city_jd_auditors:
          ui:
            widget: text-view
            col: 12
    province_jd_auditors_check_ui_view:
      title: 省公司审核详情
      controls:
        province_jd_auditor_result:
          ui:
            widget: text-view
            col: 12
        province_jd_auditors:
          ui:
            widget: text-view
            col: 12
    director_check_ui_view:
      title: 省公司优化主任审核详情
      controls:
        director_approve_result:
          ui:
            widget: text-view
            col: 12
        directors:
          ui:
            widget: text-view
            col: 12
    province_leader_check_ui_view:
      title: 省领导审核详情
      controls:
        leader_approve_result:
          ui:
            widget: text-view
            col: 12
        leaders:
          ui:
            widget: text-view
            col: 12
    check_ui_view:
      title: 审核详情
      controls:
        city_jd_auditor_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.org_type==2
        city_jd_auditors:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.org_type==3
        province_jd_auditor_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_jd_auditor_result !=null
        province_jd_auditors:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_jd_auditors !=null
        director_approve_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.director_approve_result !=null
        directors:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.directors !=null
        leader_approve_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.leader_approve_result !=null
        leaders:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.leaders !=null
    creator_ui_view:
      title: 用户确认结束
      controls:
        creator_approve_result:
          ui:
            col: 12
            widget: select
            data:
            - {value: 1 ,label: 不通过}
            - {value: 2 ,label: 通过}
          validate:
            required: true
  default_ui:
    - create_details_ui_view
  tasks:
    Task_1c7rs4k:
    - create_ui_view
    - details_ui_view
    Task_0wgcntc:
    - create_details_ui_view
    - city_jd_auditors_ui_view
    Task_19buuol:
    - create_details_ui_view
    - province_jd_auditors_ui_view
    Task_1e8eqcp:
    - create_details_ui_view
    - director_ui_view
    Task_14c6033:
    - create_details_ui_view
    - province_leader_ui_view
    Task_15858rp:
    - create_details_ui_view
    - creator_ui_view