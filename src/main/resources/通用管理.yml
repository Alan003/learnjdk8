title: 小区节电流程配置
type: object
properties:
  start_node: Task_1c7rs4k
  engine_variables:
    title: 流转变量
    type: object
    properties:
      workOrderName:
        title: 工单标题
        type: string
      description:
        title: 需求描述
        type: string
      files:
        title: 节电任务清单上传
        type: file
      startUnit:
        title: 发起单位
        type: string
      communityNumber:
        title: 小区数量
        type: long
      operationType:
        title: 操作类别
        type: string
      aboutCity:
        title: 涉及城市
        type: string
      aboutFactory:
        title: 涉及厂家
        type: string
      city_principal:
        title: 市公司审核人
        type: string
      city_principal_result:
        title: 市公司审核结果
        type: string
      province_principal:
        title: 省公司审核人
        type: string
      province_principal_result:
        title: 省公司审核结果
        type: string
      province_director:
        title: 省主任审核人
        type: string
      province_director_result:
        title: 省主任审核结果
        type: string
      province_leader:
        title: 省领导审核
        type: string
      province_leader_result:
        title: 省领导审核结果
        type: string
      pause:
        title: 暂停
        type: long
  ui_groups:
    create_ui_view:
      title: 工单创建
      controls:
        workOrderName:
          ui:
            widget: text
            col: 24
          validate:
            required: true
            maxLength: 200
        description:
          ui:
            widget: textarea
            col: 24
          validate:
            required: true
        city_principal:
          ui:
            widget: pop-person
            col: 24
            options:
              multiple: false
              show: engine_data.startUnit=='市公司'
          validate:
            required: true
        province_principal:
          ui:
            widget: pop-person
            col: 24
            options:
              multiple: false
              show: engine_data.startUnit=='省公司'
          validate:
            required: true
    details_ui_view:
      title: 节电任务详情
      controls:
        startUnit:
          ui:
            widget: select
            data:
            - {value: 市公司 ,label: 市公司}
            - {value: 省公司 ,label: 省公司}
            col: 8
          validate:
            required: true
        communityNumber:
          ui:
            widget: text-view
            col: 8
            data: engine_data.files==null? '':engine_data.files.dataTotalRowCount
        operationType:
          ui:
            widget: text-view
            col: 8
            data: engine_data.files==null? '':engine_data.files.listType.join('，')
        aboutCity:
          ui:
            widget: text-view
            col: 24
            data: engine_data.files==null? '':engine_data.files.city.join('，')
        aboutFactory:
          ui:
            widget: text-view
            col: 24
            data: engine_data.files==null? '':engine_data.files.deviceFactory.join('，')
        pause:
          ui:
            widget: hidden
            data: engine_data.files==null? 3:engine_data.files.pauseOnly
    city_principal_ui_view:
      title: 市公司审核
      controls:
        city_principal_result:
          ui:
            col: 24
            widget: select
            data:
            - {value: 不通过 ,label: 不通过}
            - {value: 通过 ,label: 通过}
          validate:
            required: true
        province_principal:
          ui:
            widget: pop-person
            col: 12
            options:
              multiple: false
              show: engine_data.city_principal_result=='通过'
          validate:
            required: true
    province_principal_ui_view:
      title: 省公司审核
      controls:
        province_principal_result:
          ui:
            col: 24
            widget: select
            data:
            - {value: 不通过 ,label: 不通过}
            - {value: 通过 ,label: 通过}
          validate:
            required: true
        province_director:
          ui:
            widget: pop-person
            col: 12
            options:
              multiple: false
              show: engine_data.communityNumber>=10000 && engine_data.province_principal_result=='通过'
          validate:
            required: true
    province_director_ui_view:
      title: 省主任审核
      controls:
        province_director_result:
          ui:
            col: 24
            widget: select
            data:
            - {value: 不通过 ,label: 不通过}
            - {value: 通过 ,label: 通过}
          validate:
            required: true
        province_leader:
          ui:
            widget: pop-person
            col: 12
            options:
              multiple: false
              show: engine_data.communityNumber>=100000 && engine_data.province_director_result=='通过'
          validate:
            required: true
    province_leader_ui_view:
      title: 省领导审核
      controls:
        province_leader_result:
          ui:
            col: 24
            widget: select
            data:
            - {value: 不通过 ,label: 不通过}
            - {value: 通过 ,label: 通过}
          validate:
            required: true
    create_details_ui_view:
      title: 工单详情
      controls:
        workOrderName:
          ui:
            widget: text-view
        description:
          ui:
            widget: text-view
        files:
          ui:
            widget: jdgl-excel-upload
            options:
              value: engine_data.files
        startUnit:
          ui:
            widget: text-view
            col: 8
        communityNumber:
          ui:
            widget: text-view
            col: 8
        operationType:
          ui:
            widget: text-view
            col: 8
        aboutCity:
          ui:
            widget: text-view
            col: 24
        aboutFactory:
          ui:
            widget: text-view
            col: 24
    city_principal_check_ui_view:
      title: 市公司审核详情
      controls:
        city_principal_result:
          ui:
            widget: text-view
            col: 12
        city_principal:
          ui:
            widget: text-view
            col: 12
    province_principal_check_ui_view:
      title: 省公司审核详情
      controls:
        province_principal_result:
          ui:
            widget: text-view
            col: 12
        province_principal:
          ui:
            widget: text-view
            col: 12
    province_director_check_ui_view:
      title: 省主任审核详情
      controls:
        province_director_result:
          ui:
            widget: text-view
            col: 12
        province_director:
          ui:
            widget: text-view
            col: 12
    province_leader_check_ui_view:
      title: 省领导审核详情
      controls:
        province_leader_result:
          ui:
            widget: text-view
            col: 12
        province_leader:
          ui:
            widget: text-view
            col: 12
    check_ui_view:
      title: 审核详情
      controls:
        city_principal_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.startUnit=='市公司'
        city_principal:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.startUnit=='市公司'
        province_principal_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_principal_result !=null
        province_principal:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_principal !=null
        province_director_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_director_result !=null
        province_director:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_director !=null
        province_leader_result:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_leader_result !=null
        province_leader:
          ui:
            widget: text-view
            col: 12
            options:
              show: engine_data.province_leader !=null

  default_ui:
    - create_details_ui_view
    - check_ui_view
  tasks:
    Task_1c7rs4k:
    - create_ui_view
    - details_ui_view
    Task_1jp3ezo:
    - create_details_ui_view
    - city_principal_ui_view
    Task_19buuol:
    - create_details_ui_view
    - check_ui_view
    - province_principal_ui_view
    Task_1of5daj:
    - create_details_ui_view
    - check_ui_view
    - province_director_ui_view
    Task_1e8eqcp:
    - create_details_ui_view
    - check_ui_view
    - province_director_ui_view
    Task_14c6033:
    - create_details_ui_view
    - check_ui_view
    - province_leader_ui_view